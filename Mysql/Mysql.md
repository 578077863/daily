# Mysql

## 1. MVCC

[MVCC实现机制 - 路常有 - 博客园 (cnblogs.com)](https://www.cnblogs.com/luchangyou/p/11321607.html)

[(28条消息) MVCC 机制的原理及实现_时间领跑者的博客-CSDN博客_mvcc机制](https://blog.csdn.net/qq_41361506/article/details/108538702)

首先 了解 mvcc 是啥?mvcc中文名叫多版本并发控制机制

有什么用?或者说是为了解决什么问题?

> 解决并发访问数据库的读写冲突问题,通过保存数据在某个时间点的快照使得读取到的记录值符合事务所处的隔离级别
>
> 因为存储引擎使用InnoDB, InnoDB相比 MyISAM ,支持事务和行级锁,但带来的问题是: 脏读,不可重复读,幻读



使用 MVCC的前提: 隔离级别为 读已提交 或 可重复读

即然引入了事务,那么介绍下面内容:

事务的定义 : 

数据库的事务是一个操作序列,包含了一组数据库操作命令,事务把所有的命令作为一个整体一起向系统提交或撤销操作请求,即这一组数据库命令要么都执行,要么都不执行.因此事务是一个不可分割的工作逻辑单元



事务具有哪几个特性:

1. 原子性
2. 一致性
3. 隔离性
4. 持久性



事务有哪几个隔离级别:

1. 读未提交
2. 读已提交
3. 可重复读
4. 可序列化



事务并发带来的问题:

1. 脏读

2. 不可重复读

3. 幻读

4. 丢失更新

   * 第一类丢失更新

     事务A 回滚 , 覆盖了事务B所做的更新

   * 第二类丢失更新

     事务A 提交 , 覆盖了事务B所做的更新